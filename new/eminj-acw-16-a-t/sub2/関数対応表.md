# 関数対応表

## パブリック関数詳細一覧

ファイル: `eminj_l_mat.c`

総関数数: 4

---

## 1. vdg_eminj_pwon

### 基本情報

| 項目 | 内容 |
|------|------|
| 関数名 | `vdg_eminj_pwon` |
| 日本語名 |  |
| 行番号 | 721 |
| 呼出タイミング |  |
| 引数 | `void` |
| 引数説明 |  |
| 戻り値 | void |
| 戻り値説明 |  |

### 機能説明



### 仕様書対応

- **仕様書セクション**: A.1 機能概要
- **処理内容**: 初期化処理
  - 噴射量補正係数の初期設定
  - ポート噴射係数の初期化
  - データ構造の初期化

### 主要な処理フロー

```
1. 初期化
   - シリンダ数、バンク数の取得
2. 噴射量補正係数の設定
   - ekrchref: リッチ化補正係数
   - ekrichx: 噴射量補正係数
3. ポート噴射係数の設定
   - JEEFI == PORT の場合: 1.0
   - それ以外: 0.0
4. 噴射終了時刻の取得
   - ebinjctr モジュールから取得
5. データ構造への反映
   - 旧構造 (stg_eminj_einj)
   - 新構造 (stg_eminj_eminj)
```

---

## 2. vdg_eminj_8msm

### 基本情報

| 項目 | 内容 |
|------|------|
| 関数名 | `vdg_eminj_8msm` |
| 日本語名 |  |
| 行番号 | 814 |
| 呼出タイミング |  |
| 引数 | `void` |
| 引数説明 |  |
| 戻り値 | void |
| 戻り値説明 |  |

### 機能説明



### 仕様書対応

- **仕様書セクション**: D.1 噴射要求の調停処理, D.2-2-1 優先度判定, D.2-2-2 制限判定
- **処理内容**: メイン調停処理
  - 各機能からの噴射要求データ取得
  - 優先度テーブルによる調停
  - 最高優先度要求の選択と反映
  - 補正係数の適用

### 主要な処理フロー

```
1. 前提条件チェック
   - NE同期タスク完了確認
   - 噴射メディ無効フラグ確認
2. 補正係数の算出
   - バンク別補正係数
   - 総合補正係数
3. 要求データ取得ループ
   - 各機能モジュールから噴射要求取得
   - 優先度テーブルに従ってデータ格納
4. 優先度調停
   - 通常調停: vds_eminj_eminj_hpri()
   - 制限考慮調停: vds_eminj_eminjlmt_hpri()
5. 噴射パラメータ決定
   - 噴射量、噴射時期の確定
   - 補正係数の適用
6. 結果の格納と通知
   - データ構造への格納
   - 外部モジュールへの更新通知
```

---

## 3. vdg_eminj_einj_dataget

### 基本情報

| 項目 | 内容 |
|------|------|
| 関数名 | `vdg_eminj_einj_dataget` |
| 日本語名 |  |
| 行番号 | 2604 |
| 呼出タイミング |  |
| 引数 | `st_EMINJ_EINJ *ptt_retval` |
| 引数説明 |  |
| 戻り値 | void |
| 戻り値説明 |  |

### 機能説明



### 仕様書対応


### 主要な処理フロー

```
1. 割り込み禁止 (glint_di)
2. データコピー
   - グローバル構造体から引数バッファへコピー
   - 全シリンダ、全バンクのデータ
3. 割り込み許可 (glint_ei)
```

---

## 4. vdg_eminj_eminj_dataget

### 基本情報

| 項目 | 内容 |
|------|------|
| 関数名 | `vdg_eminj_eminj_dataget` |
| 日本語名 |  |
| 行番号 | 2730 |
| 呼出タイミング |  |
| 引数 | `st_EMINJ_EMINJ *ptt_retval` |
| 引数説明 |  |
| 戻り値 | void |
| 戻り値説明 |  |

### 機能説明



### 仕様書対応

- **仕様書セクション**: E. 外部インターフェース (新構造)
- **処理内容**: 噴射情報取得 (新構造)
  - 新データ構造での情報提供
  - 旧構造との互換性維持

### 主要な処理フロー

```
1. 割り込み禁止 (glint_di)
2. データコピー
   - グローバル構造体から引数バッファへコピー
   - 全シリンダ、全バンクのデータ
3. 割り込み許可 (glint_ei)
```

---

## スタティック関数一覧

内部ヘルパー関数 (パブリック関数から呼び出される)

| 関数名 | 行番号 | 戻り値型 | 機能概要 |
|--------|--------|----------|----------|
| vds_eminj_eminj_hpri | 680 | void | 優先度判定 (通常) |
| vds_eminj_eminjlmt_hpri | 681 | void | 優先度判定 (制限付き) |
| vds_eminj_einj_dataset | 682 | void | データセット処理 |
| vds_eminj_einj_datacopy | 683 | void | データコピー処理 |
| vds_eminj_eminj_dataset | 684 | void | データセット処理 (新) |
| vds_eminj_einj_datacopy2 | 685 | void | データコピー処理2 |
| vds_eminj_einj_dataconv | 686 | void | データ変換処理 |
| vds_eminj_einj_dataconv_rev | 687 | void | データ逆変換処理 |
| vds_eminj_erestahot_rap_dataget | 689 | void | 高温始動データ取得 |
| vds_eminj_erdpn_rap_dataget | 692 | void | 電動ポンプデータ取得 |
| vds_eminj_dummy_emedi_dataget | 694 | void | ダミーデータ取得 |
| vds_eminj_dummy_emedi_dataget2 | 695 | void | ダミーデータ取得2 |

